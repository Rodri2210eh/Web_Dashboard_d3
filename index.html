<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Feature Importance Visualization</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/parquetjs@0.11.2/dist/parquet.min.js"></script>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/chart-types.css">
</head>
<body>
    <header>
        <div class="container">
            <h1>Feature Importance Visualization</h1>
        </div>
    </header>

    <main class="container">
        <section id="controls">
            <div class="control-group">
                <label for="file-upload" class="file-upload">
                    Select CSV/Parquet Files
                </label>
                <input id="file-upload" type="file" accept=".csv,.parquet" multiple>
                <span id="file-info">No files selected</span>
            </div>
            <div class="control-group">
                <div id="file-list" class="file-list"></div>
            </div>
            <div class="control-group">
                <button id="add-chart">Add New Chart</button>
                <button id="export-charts">Export Charts as Image</button>
                <button id="join-charts">Merge Charts</button>
            </div>
        </section>
        
        <section class="charts-grid" id="charts-grid">
            <!-- Charts will be dynamically added here -->
        </section>
    </main>

    <!-- Export Modal -->
    <div id="export-modal" class="modal">
        <div class="modal-content">
            <h3>Select Charts to Export</h3>
            <div class="charts-list"></div>
            <div class="modal-actions">
                <button id="select-all">Select All</button>
                <button id="export-selected">Export Selected</button>
                <button id="cancel-export">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Merge Modal -->
    <div id="join-modal" class="modal">
        <div class="modal-content">
            <h3>Select Charts to Merge</h3>
            <p>Select two charts with the same feature to combine them:</p>
            <div class="charts-list"></div>
            <div class="modal-actions">
                <button id="confirm-join">Merge Charts</button>
                <button id="cancel-join">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Debug Script -->
    <script>
        // Debug script to check if everything is loading correctly
        console.log('=== DEBUG: Checking dependencies ===');
        console.log('D3.js loaded:', typeof d3 !== 'undefined');
        console.log('Parquet.js loaded:', typeof parquet !== 'undefined');
        
        // Check if page elements exist
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM fully loaded');
            console.log('File upload element:', document.getElementById('file-upload'));
            console.log('Add chart button:', document.getElementById('add-chart'));
            console.log('Charts grid:', document.getElementById('charts-grid'));
        });
    </script>

    <!-- Load JavaScript files -->
    <script src="js/data-processor.js"></script>
    <script src="js/chart-types.js"></script>
    <script src="js/export-manager.js"></script>
    <script src="js/merge-manager.js"></script>
    <script src="js/chart-manager.js"></script>
    <script src="js/main.js"></script>
</body>
</html>